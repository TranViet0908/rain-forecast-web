<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Bản Đồ Cảnh Báo - RainAI</title>
    <link rel="stylesheet" href="/css/style.css">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://cdn.jsdelivr.net/npm/animejs@3/lib/anime.min.js"></script>
    <style>
        /* Map Specific Overrides */
        #map {
            width: 100%;
            height: calc(100vh - 70px); /* Trừ đi chiều cao Header */
            z-index: 1;
            background: #0f172a; /* Nền tối khi map chưa load */
        }

        /* Custom Popup Style (Glass Dark) */
        .leaflet-popup-content-wrapper {
            background: rgba(15, 23, 42, 0.95); /* Dark Navy Glass */
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }
        .leaflet-popup-tip {
            background: rgba(15, 23, 42, 0.95);
        }
        .leaflet-popup-content {
            margin: 1rem;
            min-width: 200px;
        }
        .leaflet-popup-close-button {
            color: #cbd5e1 !important;
        }

        /* Pulsing Marker Animation */
        .custom-pin {
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
<!-- Header dùng cú pháp mới -->
<div th:replace="~{fragments/header :: header}"></div>

<main style="width: 100%; overflow: hidden;">
    <div id="map"></div>
</main>

<!-- Load JS Leaflet -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<!-- Load Logic Map của mình -->
<script src="/js/map-monitor.js"></script>
</body>
</html>